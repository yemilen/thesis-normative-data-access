<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core">

    <div class="menu-container">
        <!-- Member ID Section -->
        <div class="member-section">
            <h:form id="memberForm">
                <div class="member-input">
                    <h:outputLabel for="memberId" value="Member ID:" styleClass="member-label"/>
                    <h:selectOneMenu id="memberId"
                                     value="#{sessionBean.memberId}"
                                     required="true"
                                     requiredMessage="Member ID is required">
                        <f:selectItem itemLabel="Select a member..." itemValue="" />

                        <!-- Hospital 1 Members -->
                        <f:selectItem itemLabel="Hospital 1 - Admin" itemValue="admin@hospital1" />
                        <f:selectItem itemLabel="Hospital 1 - Alice" itemValue="alice@hospital1" />
                        <f:selectItem itemLabel="Hospital 1 - Bob" itemValue="bob@hospital1" />

                        <!-- Hospital 2 Members -->
                        <f:selectItem itemLabel="Hospital 2 - Admin" itemValue="admin@Hospital2" />
                        <f:selectItem itemLabel="Hospital 2 - Carol" itemValue="carol@Hospital2" />
                        <f:selectItem itemLabel="Hospital 2 - Dave" itemValue="dave@Hospital2" />

                        <!-- Research Institute Members -->
                        <f:selectItem itemLabel="Research - Admin" itemValue="admin@research" />
                        <f:selectItem itemLabel="Research - Emma" itemValue="emma@research" />
                        <f:selectItem itemLabel="Research - Frank" itemValue="frank@research" />

                        <!-- DIPG Board Members -->
                        <f:selectItem itemLabel="DIPG Board - Admin" itemValue="admin@dipgboard" />
                        <f:selectItem itemLabel="DIPG Board - Grace" itemValue="grace@dipgboard" />
                        <f:selectItem itemLabel="DIPG Board - Henry" itemValue="henry@dipgboard" />

                        <f:ajax event="change"
                                execute="@this"
                                listener="#{sessionBean.updateMember}"
                                render="memberMessage menuItems"/>
                    </h:selectOneMenu>
                </div>
                <h:message for="memberId" styleClass="error-message"/>
                <h:outputText id="memberMessage"
                              value="#{sessionBean.message}"
                              styleClass="member-message"/>
            </h:form>
        </div>

        <!-- Navigation Menu -->
        <nav class="menu-nav">
            <!-- Home Link -->
            <div class="menu-home">
                <h:link outcome="/index" value="Home" styleClass="menu-link"/>
            </div>

            <!-- PEP Section -->
            <div class="menu-section">
                <h3 class="menu-header">PEP</h3>
                <div class="menu-items">
                    <h:link outcome="/pep/contribute"
                            value="Contribute Data"
                            styleClass="menu-link"/>
                </div>
            </div>

            <!-- Duty Messages Section -->
            <div class="menu-section">
                <h3 class="menu-header">Duty Messages</h3>
                <div class="menu-items">
                    <h:link outcome="/dutiesmessaging/duties-list" value="All Duties" styleClass="menu-link">
                        <f:param name="view" value="all"/>
                    </h:link>
                    <h:link outcome="/dutiesmessaging/duties-list" value="My Duties" styleClass="menu-link">
                        <f:param name="view" value="to"/>
                    </h:link>
                    <h:link outcome="/dutiesmessaging/duties-list" value="Assigned Duties" styleClass="menu-link">
                        <f:param name="view" value="from"/>
                    </h:link>
                </div>
            </div>
        </nav>
    </div>

    <h:outputStylesheet>
        .menu-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .member-section {
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 4px;
        }

        .member-input {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .member-label {
            font-weight: bold;
        }

        .member-message {
            display: block;
            margin-top: 0.5rem;
            font-size: 0.9em;
            color: #666;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.9em;
        }

        .menu-nav {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .menu-home {
            padding: 0.5rem 0;
            border-bottom: 1px solid #ddd;
        }

        .menu-section {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .menu-header {
            color: #333;
            font-size: 1.1em;
            margin: 0;
            padding: 0.5rem 0;
            font-weight: bold;
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding-left: 1rem;
        }

        .menu-link {
            text-decoration: none;
            color: #666;
            padding: 0.3rem 0;
            display: block;
        }

        .menu-link:hover {
            color: #000;
        }
    </h:outputStylesheet>

</ui:composition>